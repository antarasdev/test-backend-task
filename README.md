## Тестовое задание для Python Back-end разработчика

### Стек:
[![Docker](https://img.shields.io/badge/Docker-gray?logo=docker)](https://www.docker.com/)
[![docker-compose](https://img.shields.io/badge/docker--compose-gray?logo=docker)](https://docs.docker.com/compose/)
[![FastAPI](https://img.shields.io/badge/FastAPI-gray?logo=fastapi)](https://fastapi.tiangolo.com/)
[![Clickhouse](https://img.shields.io/badge/Clickhouse-gray?logo=clickhouse)](https://clickhouse.tech/)

### Основное задание:
Представлены данные в формате csv. Данные содержат информацию о динамике торговли двух стран.
В поле netweight представлена информация о весе торгуемой продукции в килограммах,
в поле trade_value – стоимость продукции в долларах США, 
поле commodity_code – классификатор товарной номенклатуры внешнеэкономической деятельности (ТН ВЭД).

1. Определить для каждого поля таблицы предпочитаемый тип данных (для формирования схемы таблицы в базе данных). Типы данных Postgres или другой базы данных с указанием ее названия.
2. Развернуть в Docker контейнере Postgres. Создать условную bd и таблицу для данных из пункта 1. Создать подключение к базе данных. Загрузить данные в таблицу. Настроить миграции.
3. Написать код на python (опционально: с использованием фреймворка pandas), которые возвращают в формате json:
 - a) сумму по полю netweight со следующими условиями: commodity_code начинается с символов «0207» и имеет 6 символов, reporter = Angola, year = 2019;
 - b) одну запись partner, которая удовлетворяет условиям: commodity_code = 0207, reporter = Angola, trade_flow_code = 1, period_desc = January 2019, где сумма по полю netweight является максимальной;
 - c) все записи по полю  импорта (в процентах) мяса птицы Анголой по странам поставщикам по весу.
4. Реализовать minimal API эндпоинт на Django/Fastapi, который будет принимать GET запрос с параметром на вход «a», «b» или «c» для вывода результатов пункта 3 по соответствующим подпунктам.
### Скрипт:
В файле `app/utils.py` содержится скрипт, который возвращает данные в формате JSON:
   - a) Сумма по полю `netweight` с определенными условиями.
   - b) Одна запись `partner`, удовлетворяющая определенным условиям.
   - c) Все записи по полю импорта мяса птицы Анголой по странам поставщикам по весу.

### Minimal API с FastAPI:
 - Реализован базовый функционал аутентификации для minimal API через POST запрос с передачей токена в хедере. 
   В случае отсутствия или неверного токена возвращается ошибка «Отказано в доступе».
  

 - Реализован дполнительно для minimal API эндпоинт,
   который принимает GET запрос для вывода всех данных с наименованием столбцов базы,
   с выводом по 100 позиций на страницу.

### Инструкция по развертыванию приложения в Docker:
1. Склонировать репозиторий:
  
`git clone git@github.com:babyshitt/test-backend-task.git`
2. Создайте файл `.env` в корне проекта с данными:
   ```
   DB_HOST='database'
   DB_PORT='9000'
   DB_USER='username'
   DB_PASSWORD='password'
   TOKEN='9876543210'
   ```
   
3. Для развертывания приложения перейдите в директорию infra:

`cd infra`
  

   И выполните команду:

   `sudo docker-compose up -d --build`

